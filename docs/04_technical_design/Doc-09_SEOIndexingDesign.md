# Doc-09 SEO & Indexing Architecture Design v1.0

Project: seiren-ohakajimai-navi

## 1. 目的

本ドキュメントは、本プロジェクトのSEO設計をエンタープライズ基準で固定し、
検索流入最大化とインデックス品質維持を両立させることを目的とする。

対象範囲：

- URL設計
- メタ情報生成
- sitemap生成
- robots管理
- 構造化データ
- 重複排除
- 内部リンク設計
- クロール効率最適化

---

## 2. 基本方針

### 2.1 検索ポータル最適化

- 全国自治体単位で検索意図を網羅
- 改葬許可申請関連キーワードを明確化
- ローカルSEO強化

### 2.2 サーバーサイド中心

- Server Component前提
- メタ情報はサーバー生成
- クライアント依存禁止

### 2.3 不変条件連動

- 存在しない自治体URLを生成しない
- sitemapに無効URLを含めない

---

## 3. URL設計

### 3.1 原則

- 静的で安定
- slugは正規化済み
- JIS変換による揺れ排除

### 3.2 URL構造例（設計原則）

```
/kaisoukyoka/{municipalitySlug}
/kaisoukyoka/{municipalitySlug}/guide
```

### 3.3 禁止事項

- クエリ依存URL
- 同一コンテンツの複数URL生成
- PDF直リンクを公開URL扱い

---

## 4. メタ情報設計

### 4.1 title生成原則

- 自治体名 + 改葬許可申請 + 固定ブランド名

### 4.2 description原則

- 120〜160文字以内
- 自治体名を含む
- 重複禁止

### 4.3 canonical

- 必ず自己参照
- 重複排除

---

## 5. 構造化データ

### 5.1 種類

- BreadcrumbList
- Article または WebPage
- FAQ（存在する場合）

### 5.2 原則

- 存在しない項目は出力しない
- 動的生成時もサーバーで確定

---

## 6. sitemap設計

### 6.1 含めるもの

- 自治体ページ
- ガイドページ

### 6.2 含めないもの

- PDFリンク
- 管理ページ
- 未公開ページ

### 6.3 件数整合

- 自治体件数 1,737 と一致すること
- 差異はCI失敗扱い

---

## 7. robots.txt設計

### 7.1 許可

- 公開ページ

### 7.2 禁止

- 管理ルート
- API内部ルート
- デバッグ系

---

## 8. 内部リンク設計

### 8.1 階層

```
トップ
→ 都道府県
→ 自治体
→ 詳細ガイド
```

### 8.2 原則

- 孤立ページを作らない
- パンくず必須

---

## 9. 重複コンテンツ対策

### 9.1 URL正規化

- 末尾スラッシュ統一
- 大文字小文字統一

### 9.2 slug揺れ排除

- municipality_map.json による補完前提

---

## 10. パフォーマンスとの連携

- sitemap生成がビルド時間を肥大させない
- SEO生成物増加はPerformance Docと整合

---

## 11. 検索意図設計

### 11.1 主要キーワード

- 改葬許可申請
- 自治体名 + 改葬
- お墓じまい + 自治体名

### 11.2 ページ役割分離

- 情報ページ
- 手続きページ
- 解説ページ

---

## 12. CIゲート

以下はCIで検証する：

- sitemap内URL存在確認
- 重複URLなし
- title重複なし
- description重複なし

---

## 13. 変更履歴

| Version | 内容 |
|---------|------|
| v1.0 | 初版 |
